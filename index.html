<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ°¸çºŒç”Ÿæ´»å°è¨˜è€…</title>
  
  <!-- å¼•å…¥å‚™æ´å­—é«” -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* æ°¸çºŒä¸»é¡Œé…è‰² */
    :root { 
      --b:#2e7d32; 
      --g:#c8e6c9; 
      --mut:#558b2f; 
      --bg:#f1f8e9; 
      /* å…¨åŸŸå­—é«”è¨­å®šï¼šå¾®è»Ÿæ­£é»‘é«” */
      --font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", "Noto Sans TC", system-ui, sans-serif;
    }
    
    body {
      font-family: var(--font-family);
      margin: 0; 
      color: #1b5e20;
      padding-bottom: 40px;
      background-color: var(--bg);
      background-image: url('https://lh3.googleusercontent.com/d/1PMMbc6X59Ifwywx8fg2beaCXEBB_iBtZ');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
    }
    
    .wrap { 
      max-width: 800px; 
      margin: 20px auto; 
      padding: 24px; 
      background: rgba(255, 255, 255, 0.9); 
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      backdrop-filter: blur(3px); 
    }

    /* === æ ¸å¿ƒï¼šå‚ç›´æ³¨éŸ³æ’ç‰ˆ === */
    .z-word {
      display: inline-flex;
      align-items: center;
      margin: 0 0.35rem 0 0;
      vertical-align: middle;
      font-family: var(--font-family);
      position: relative;
      white-space: nowrap; 
    }
    .z-char {
      font-size: 1.6rem; 
      line-height: 1;
      font-weight: bold;
      color: #1b5e20;
      margin-right: 4px;
    }
    .z-yin {
      display: inline-flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      width: 0.75rem; 
      font-size: 0.55rem; 
      line-height: 0.85;  
      color: #33691e;
      font-weight: normal;
      overflow: visible;
      height: 1.6rem; 
    }
    .yin-symbol { 
      display: block; 
      height: 0.42rem; 
      line-height: 0.42rem;
      text-align: center;
    }
    
    /* è²èª¿å®šä½ */
    .tone {
      position: absolute;
      font-family: system-ui, sans-serif;
      font-size: 0.55rem;
    }
    .tone-2, .tone-3, .tone-4 {
      right: -0.12rem; 
      top: 50%; 
      transform: translateY(-50%); 
      width: 0.4rem;
      text-align: left;
    }
    .tone-0 {
      top: -0.3rem; 
      left: 50%; 
      transform: translateX(-50%);
    }

    /* æç¤ºæ–‡å­—å¾®å‹åŒ– */
    .z-small .z-char { font-size: 0.9rem; }
    .z-small .z-yin { font-size: 0.3rem; height: 0.9rem; width: 0.45rem; }
    .z-small .yin-symbol { height: 0.28rem; line-height: 0.28rem; }
    .z-small .tone { font-size: 0.3rem; right: -0.05rem; }

    /* æ¨™é¡Œæ¨£å¼ */
    h1 .z-char { font-size: 2.2rem; color: #1b5e20; }
    h1 .z-yin { font-size: 0.65rem; width: 0.85rem; height: 2.2rem; }
    h1 .yin-symbol { height: 0.55rem; line-height: 0.55rem; }
    
    .step-badge {
      display: inline-flex;
      align-items: center;
      background: #c8e6c9; padding: 5px 12px; 
      border-radius: 12px 0 12px 0; border: 1px solid #81c784;
      margin-right: 8px;
    }
    .step-badge .z-char { font-size: 1.1rem; color: #1b5e20; }
    .step-badge .z-yin { font-size: 0.4rem; height: 1.1rem; color: #2e7d32; }
    .step-num { font-size: 1.2rem; font-weight: 900; margin-left: 4px; color: #1b5e20; }

    label .z-char { font-size: 16px; }
    label .z-yin { font-size: 0.35rem; width: 0.5rem; height: 16px; }
    label .yin-symbol { height: 0.32rem; line-height: 0.32rem; }

    /* æŒ‰éˆ•å…§å®¹æ³¨éŸ³ç¸®æ”¾ */
    .btn .z-char { font-size: 1.1rem; }
    .btn .z-yin { font-size: 0.4rem; width: 0.5rem; height: 1.1rem; }

    .input-highlight {
      font-family: var(--font-family);
      font-size: 1.6rem; 
      font-weight: bold;
      color: #000;
      text-decoration: underline;
      text-decoration-color: #888;
      text-decoration-thickness: 2px;
      text-underline-offset: 5px;
      margin: 0 4px;
      vertical-align: middle;
    }

    .btn {
      font-family: var(--font-family);
      border: 1px solid var(--b); background: #388e3c; color: #fff; 
      padding: 10px 16px; border-radius: 12px; cursor: pointer; 
      font-size: 14px; display: inline-flex; align-items: center; gap: 6px;
      font-weight: bold; transition: all 0.2s; box-shadow: 0 2px 0 #1b5e20;
    }
    .btn:active { transform: translateY(2px); box-shadow: none; }
    .btn.large { width: 100%; justify-content: center; font-size: 16px; padding: 12px; background: #2e7d32; border-color: #2e7d32; }
    .btn.large .z-yin, .btn.large .z-char { color: #ffffff !important; }
    
    .btn.secondary { background: #fff; color: #2e7d32; border: 1px solid #2e7d32; box-shadow: 0 2px 0 #2e7d32; padding: 6px 12px; }
    .btn.secondary:disabled { opacity: 0.5; box-shadow: none; }

    .file-custom { display: inline-flex; align-items: center; gap: 10px; width: 100%; margin-top: 10px; }
    #photoInput { display: none; }
    .file-btn { background: #e8f5e9; color: #2e7d32; border: 2px dashed #81c784; padding: 10px 15px; border-radius: 10px; cursor: pointer; display: inline-flex; align-items: center; transition: background 0.2s; }
    .file-btn:hover { background: #c8e6c9; }
    .file-status { font-size: 14px; color: #666; flex: 1; }

    .card { background: rgba(255, 255, 255, 0.95); border: 1px solid #a5d6a7; border-radius: 16px; padding: 16px; box-shadow: 0 4px 6px rgba(46, 125, 50, 0.05); margin-bottom: 16px; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .between { justify-content: space-between; }

    .canvasWrap { position: relative; width: 100%; border: 2px dashed #81c784; border-radius: 12px; overflow: hidden; background: #f1f8e9; display: flex; justify-content: center; align-items: center; min-height: 250px; }
    canvas { display: block; max-width: 100%; height: auto; touch-action: none; cursor: crosshair; }
    
    .two { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 12px; align-items: end; }
    @media (max-width: 600px){ .two { grid-template-columns: 1fr; } }
    
    label { display: block; margin-bottom: 8px; font-weight: bold; color: #2e7d32; }
    input[type="text"], select { width: 100%; height: 44px; padding: 0 12px; border: 1px solid #a5d6a7; border-radius: 10px; font-size: 16px; box-sizing: border-box; background: #fff; font-family: var(--font-family); color: #333; appearance: none; -webkit-appearance: none; }
    select { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%232e7d32' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; cursor: pointer; }
    
    .btn.record { background: #fff; border: 2px solid #ffca28; padding: 0; box-shadow: 0 3px 0 #ffb300; border-radius: 50%; width: 46px; height: 46px; display: flex; align-items: center; justify-content: center; transition: all 0.1s; overflow: hidden; }
    .btn.record svg { width: 32px; height: 32px; }
    .btn.recording { animation: pulse 1s infinite; background: #fffde7; border-color: #ef5350; box-shadow: 0 3px 0 #d32f2f; }
    
    .input-group { display: flex; gap: 8px; margin-top: 6px; align-items: center; }
    .input-group input { flex: 1; }

    /* === é¸é …æ’ç‰ˆèˆ‡ä½ˆå±€ä¿®æ­£ === */
    .radio-group, .checkbox-group { display: flex; gap: 10px; margin-top: 8px; }
    .radio-group { flex-direction: column; }
    /* ä¿®æ­£å½±éŸ¿å±¤é¢ï¼šæ©«å‘æ’åˆ—ä¸¦å…è¨±æ›è¡Œï¼Œå¢åŠ å‚ç›´é–“è·é˜²æ­¢é‡ç–Š */
    .checkbox-group { 
      flex-direction: row; 
      flex-wrap: wrap; 
      align-items: stretch; 
      gap: 12px 10px; /* å‚ç›´é–“è· 12pxï¼Œæ°´å¹³é–“è· 10px */
    }

    .item-label { 
      display: flex; 
      align-items: center; 
      gap: 8px; 
      cursor: pointer; 
      padding: 10px 14px; 
      border-radius: 12px; 
      border: none; 
      transition: all 0.2s; 
      white-space: nowrap; 
      flex: 0 1 auto; /* å…è¨±ç¸®å°ä½†ç¶­æŒåŸºåº• */
    }
    .item-label input { width: auto; margin: 0; transform: scale(1.2); flex-shrink: 0; }
    
    /* è¼”åŠ©èªªæ˜å…§çš„æ³¨éŸ³æ¨£å¼ */
    .item-desc { font-size: 0.75rem; color: #333; margin-left: 6px; font-weight: normal; display: inline-flex; align-items: center; flex-wrap: wrap; }
    .item-desc .z-word { margin: 0 0.05rem; }
    .item-desc .z-char { font-size: 0.85rem; color: #555; }
    .item-desc .z-yin { font-size: 0.3rem; height: 0.85rem; width: 0.4rem; }
    .item-desc .yin-symbol { height: 0.25rem; line-height: 0.25rem; }

    .item-label svg { width: 22px; height: 22px; flex-shrink: 0; }

    /* é¢¨éšªç­‰ç´šè‰²å½© */
    .lvl-low { background: #e8f5e9; color: #2e7d32; }
    .lvl-med { background: #fff8e1; color: #ff8f00; }
    .lvl-high { background: #ffebee; color: #c62828; }

    /* å½±éŸ¿å±¤é¢è‰²å½© */
    .scope-safety { background: #e3f2fd; color: #1565c0; } 
    .scope-env { background: #f1f8e9; color: #2e7d32; }    
    .scope-health { background: #fce4ec; color: #ad1457; } 
    .scope-inter { background: #fff3e0; color: #ef6c00; }  

    .page-section { display: none; animation: fadeIn 0.3s; }
    .page-section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .report-container { overflow-x: auto; padding: 10px; background: #334d34; border-radius: 8px; }
    #report { width: 794px; height: 1123px; padding: 40px; background: linear-gradient(rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.75)), url('https://lh3.googleusercontent.com/d/1PMMbc6X59Ifwywx8fg2beaCXEBB_iBtZ'); background-size: cover; background-position: center; margin: 0 auto; font-family: var(--font-family); box-sizing: border-box; position: relative; display: flex; flex-direction: column; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .news-header { border-bottom: 2px solid #2e7d32; margin-bottom: 10px; padding-bottom: 5px; position: relative; }
    .news-title-box { text-align: center; margin-bottom: 10px; }
    .news-info { display: flex; justify-content: space-between; align-items: flex-end; color: #555; font-size: 16px; margin-bottom: 5px; }
    .news-content-wrapper { flex: 1; display: flex; flex-direction: column; gap: 15px; overflow: hidden; }
    .news-photo-box { width: 100%; height: 250px; flex: 0 0 250px; background: transparent; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    .news-photo-box img { height: 100%; width: auto; max-width: 100%; object-fit: contain; }
    .news-content-block { line-height: 2.4; font-size: 15px; text-align: justify; flex-grow: 1; }
    .news-content-block p { margin: 10px 0; text-indent: 2em; }
    .news-footer { margin-top: auto; text-align: center; color: #555; font-size: 14px; border-top: 1px solid #aaa; padding-top: 10px; font-weight: bold; }
  </style>
</head>

<body>
  <div class="wrap">
    
    <div id="page-edit" class="page-section active">
      <div style="text-align:center; margin-bottom:20px;">
        <img src="https://lh3.googleusercontent.com/d/1ybyLQCc_DIAUeS23tz-sORNL43Vv2Kan" style="height: 80px; display: block; margin: 0 auto 10px auto;" alt="Logo">
        <h1>
          <span class="z-word"><span class="z-char">æ°¸</span><span class="z-yin"><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">çºŒ</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç”Ÿ</span><span class="z-yin"><span class="yin-symbol">ã„•</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">æ´»</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„›</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">å°</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">è¨˜</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„§</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">è€…</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„œ</span><span class="tone tone-3">Ë‡</span></span></span>
        </h1>
      </div>

      <!-- æ­¥é©Ÿ 1 (å«æ³¨éŸ³) -->
      <div class="card">
        <div class="row">
          <div class="step-badge">
            <span class="z-word"><span class="z-char">æ­¥</span><span class="z-yin"><span class="yin-symbol">ã„…</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é©Ÿ</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¡</span><span class="tone tone-4">Ë‹</span></span></span>
            <span class="step-num">1</span>
          </div>
          <span class="z-word"><span class="z-char">ä¸Š</span><span class="z-yin"><span class="yin-symbol">ã„•</span><span class="yin-symbol">ã„¤</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å‚³</span><span class="z-yin"><span class="yin-symbol">ã„”</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">ç…§</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„ </span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç‰‡</span><span class="z-yin"><span class="yin-symbol">ã„†</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span>
        </div>
        <div class="file-custom">
          <label for="photoInput" class="file-btn">
            <span class="z-word"><span class="z-char">é¸</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">æ“‡</span><span class="z-yin"><span class="yin-symbol">ã„—</span><span class="yin-symbol">ã„œ</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">ç…§</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„ </span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç‰‡</span><span class="z-yin"><span class="yin-symbol">ã„†</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span>
          </label>
          <input id="photoInput" type="file" accept="image/*" />
          <div id="fileStatus" class="file-status z-small">
             <span class="z-word"><span class="z-char">æœª</span><span class="z-yin"><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„Ÿ</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é¸</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">æ“‡</span><span class="z-yin"><span class="yin-symbol">ã„—</span><span class="yin-symbol">ã„œ</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">ç…§</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„ </span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç‰‡</span><span class="z-yin"><span class="yin-symbol">ã„†</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span>
          </div>
        </div>
      </div>

      <!-- æ­¥é©Ÿ 2 -->
      <div class="card">
        <div class="row between">
          <div class="row">
            <div class="step-badge">
              <span class="z-word"><span class="z-char">æ­¥</span><span class="z-yin"><span class="yin-symbol">ã„…</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é©Ÿ</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¡</span><span class="tone tone-4">Ë‹</span></span></span>
              <span class="step-num">2</span>
            </div>
            <span class="z-word"><span class="z-char">åœˆ</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span></span></span><span class="z-word"><span class="z-char">é¸</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">å•</span><span class="z-yin"><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„£</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é¡Œ</span><span class="z-yin"><span class="yin-symbol">ã„Š</span><span class="yin-symbol">ã„§</span><span class="tone tone-2">ËŠ</span></span></span>
          </div>
          <div class="row">
            <button class="btn secondary" id="btnUndo" type="button" disabled>
              <span class="z-word"><span class="z-char">å¾©</span><span class="z-yin"><span class="yin-symbol">ã„ˆ</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">åŸ</span><span class="z-yin"><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span>
            </button>
            <button class="btn secondary" id="btnClear" type="button" disabled>
              <span class="z-word"><span class="z-char">æ¸…</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">é™¤</span><span class="z-yin"><span class="yin-symbol">ã„”</span><span class="yin-symbol">ã„¨</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">å…¨</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">éƒ¨</span><span class="z-yin"><span class="yin-symbol">ã„…</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span>
            </button>
          </div>
        </div>
        <div class="canvasWrap" style="margin-top:10px;">
          <div id="placeholderText" class="z-small">
            <span class="z-word"><span class="z-char">è«‹</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">å…ˆ</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span></span></span><span class="z-word"><span class="z-char">é¸</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">æ“‡</span><span class="z-yin"><span class="yin-symbol">ã„—</span><span class="yin-symbol">ã„œ</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">ç…§</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„ </span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç‰‡</span><span class="z-yin"><span class="yin-symbol">ã„†</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span>
          </div>
          <canvas id="canvas" class="hidden"></canvas>
        </div>
      </div>

      <!-- æ­¥é©Ÿ 3 (å«æ³¨éŸ³æ¨™ç±¤) -->
      <div class="card">
        <div class="row">
          <div class="step-badge">
            <span class="z-word"><span class="z-char">æ­¥</span><span class="z-yin"><span class="yin-symbol">ã„…</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é©Ÿ</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¡</span><span class="tone tone-4">Ë‹</span></span></span>
            <span class="step-num">3</span>
          </div>
          <span class="z-word"><span class="z-char">å¡«</span><span class="z-yin"><span class="yin-symbol">ã„Š</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">å¯«</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">è³‡</span><span class="z-yin"><span class="yin-symbol">ã„—</span></span></span><span class="z-word"><span class="z-char">æ–™</span><span class="z-yin"><span class="yin-symbol">ã„Œ</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-4">Ë‹</span></span></span>
        </div>

        <div class="two">
          <div>
            <label><span class="z-word"><span class="z-char">å°</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">çµ„</span><span class="z-yin"><span class="yin-symbol">ã„—</span><span class="yin-symbol">ã„¨</span><span class="tone tone-3">Ë‡</span></span></span></label>
            <select id="team">
              <option value="" disabled selected>è«‹é¸æ“‡å°çµ„</option>
              <option value="Açµ„">Açµ„</option><option value="Bçµ„">Bçµ„</option>
              <option value="Cçµ„">Cçµ„</option><option value="Dçµ„">Dçµ„</option>
              <option value="Eçµ„">Eçµ„</option>
            </select>
          </div>
          <div>
            <label><span class="z-word"><span class="z-char">å°</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">è¨˜</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„§</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">è€…</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„œ</span><span class="tone tone-3">Ë‡</span></span></span></label>
            <input id="reporterName" type="text" placeholder="è«‹è¼¸å…¥å§“å">
          </div>
        </div>

        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">ç™¼</span><span class="z-yin"><span class="yin-symbol">ã„ˆ</span><span class="yin-symbol">ã„š</span></span></span><span class="z-word"><span class="z-char">ç¾</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">åœ°</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„§</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é»</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span>
          </label>
          <div class="input-group">
            <input id="locationInput" type="text">
            <button id="btnMicLocation" type="button" class="btn record">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="micGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ff8a65" /><stop offset="100%" style="stop-color:#ba68c8" /></linearGradient></defs><rect x="35" y="10" width="30" height="50" rx="15" fill="url(#micGrad)" stroke="#fff" stroke-width="2"/><path d="M25 45 C25 65, 75 65, 75 45" fill="none" stroke="#ffb74d" stroke-width="6" stroke-linecap="round"/><line x1="50" y1="63" x2="50" y2="85" stroke="#ffb74d" stroke-width="6" stroke-linecap="round"/><line x1="30" y1="85" x2="70" y2="85" stroke="#ffb74d" stroke-width="6" stroke-linecap="round"/></svg>
            </button>
          </div>
        </div>

        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">ç¾</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">æ³</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¤</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">æ</span><span class="z-yin"><span class="yin-symbol">ã„‡</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">è¿°</span><span class="z-yin"><span class="yin-symbol">ã„•</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span>
          </label>
          <div class="input-group">
            <input id="problemInput" type="text">
            <button id="btnMicProblem" type="button" class="btn record">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="35" y="10" width="30" height="50" rx="15" fill="url(#micGrad)" stroke="#fff" stroke-width="2"/><path d="M25 45 C25 65, 75 65, 75 45" fill="none" stroke="#4fc3f7" stroke-width="6" stroke-linecap="round"/><line x1="50" y1="63" x2="50" y2="85" stroke="#4fc3f7" stroke-width="6" stroke-linecap="round"/><line x1="30" y1="85" x2="70" y2="85" stroke="#4fc3f7" stroke-width="6" stroke-linecap="round"/></svg>
            </button>
          </div>
        </div>

        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">æ½›</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">åœ¨</span><span class="z-yin"><span class="yin-symbol">ã„—</span><span class="yin-symbol">ã„</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">é¢¨</span><span class="z-yin"><span class="yin-symbol">ã„ˆ</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">éšª</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span>
          </label>
          <div class="input-group">
            <input id="impactInput" type="text">
            <button id="btnMicImpact" type="button" class="btn record">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="35" y="10" width="30" height="50" rx="15" fill="url(#micGrad)" stroke="#fff" stroke-width="2"/><path d="M25 45 C25 65, 75 65, 75 45" fill="none" stroke="#81c784" stroke-width="6" stroke-linecap="round"/><line x1="50" y1="63" x2="50" y2="85" stroke="#81c784" stroke-width="6" stroke-linecap="round"/><line x1="30" y1="85" x2="70" y2="85" stroke="#81c784" stroke-width="6" stroke-linecap="round"/></svg>
            </button>
          </div>
        </div>

        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">æ”¹</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">å–„</span><span class="z-yin"><span class="yin-symbol">ã„•</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å°</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„Ÿ</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ç­–</span><span class="z-yin"><span class="yin-symbol">ã„˜</span><span class="yin-symbol">ã„œ</span><span class="tone tone-4">Ë‹</span></span></span>
          </label>
          <div class="input-group">
            <input id="suggestionInput" type="text">
            <button id="btnMicSuggestion" type="button" class="btn record">
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect x="35" y="10" width="30" height="50" rx="15" fill="url(#micGrad)" stroke="#fff" stroke-width="2"/><path d="M25 45 C25 65, 75 65, 75 45" fill="none" stroke="#f06292" stroke-width="6" stroke-linecap="round"/><line x1="50" y1="63" x2="50" y2="85" stroke="#f06292" stroke-width="6" stroke-linecap="round"/><line x1="30" y1="85" x2="70" y2="85" stroke="#f06292" stroke-width="6" stroke-linecap="round"/></svg>
            </button>
          </div>
        </div>

        <!-- é¢¨éšªç­‰ç´š (è£œå…¨æ³¨éŸ³) -->
        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">é¢¨</span><span class="z-yin"><span class="yin-symbol">ã„ˆ</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">éšª</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">ç­‰</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">ç´š</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„§</span><span class="tone tone-2">ËŠ</span></span></span>
          </label>
          <div class="radio-group">
            <label class="item-label lvl-low">
              <input type="radio" name="severity" value="ğŸŸ¢ è¼•å¾®" checked>
              <svg viewBox="0 0 24 24" fill="none" stroke="#2e7d32" stroke-width="2.5"><circle cx="12" cy="12" r="10" fill="#c8e6c9"/><path d="M9 12l2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg>
              <span>
                <span class="z-word"><span class="z-char">è¼•</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">å¾®</span><span class="z-yin"><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„Ÿ</span><span class="tone tone-2">ËŠ</span></span></span>
                <span class="item-desc">
                  (<span class="z-word"><span class="z-char">è¼•</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">åº¦</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å½±</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">éŸ¿</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¤</span><span class="tone tone-3">Ë‡</span></span></span>/<span class="z-word"><span class="z-char">å°</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„ </span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">ç¯„</span><span class="z-yin"><span class="yin-symbol">ã„ˆ</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">åœ</span><span class="z-yin"><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„Ÿ</span><span class="tone tone-2">ËŠ</span></span></span>)
                </span>
              </span>
            </label>
            <label class="item-label lvl-med">
              <input type="radio" name="severity" value="ğŸŸ¡ ä¸­åº¦">
              <svg viewBox="0 0 24 24" fill="none" stroke="#ff8f00" stroke-width="2.5"><path d="M12 9v4M12 17h.01" stroke-linecap="round" stroke-linejoin="round"/><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" fill="#fff9c4"/></svg>
              <span>
                <span class="z-word"><span class="z-char">ä¸­</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">åº¦</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span>
                <span class="item-desc">
                  (<span class="z-word"><span class="z-char">ä¸­</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">åº¦</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å½±</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">éŸ¿</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¤</span><span class="tone tone-3">Ë‡</span></span></span>/<span class="z-word"><span class="z-char">éœ€</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span></span></span><span class="z-word"><span class="z-char">æ³¨</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="ã„¨</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">æ„</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="tone tone-4">Ë‹</span></span></span>)
                </span>
              </span>
            </label>
            <label class="item-label lvl-high">
              <input type="radio" name="severity" value="ğŸ”´ åš´é‡">
              <svg viewBox="0 0 24 24" fill="none" stroke="#c62828" stroke-width="2.5"><circle cx="12" cy="12" r="10" fill="#ffebee"/><path d="M12 8v4M12 16h.01" stroke="#c62828" stroke-width="3" stroke-linecap="round"/></svg>
              <span>
                <span class="z-word"><span class="z-char">åš´</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">é‡</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¥</span><span class="tone tone-4">Ë‹</span></span></span>
                <span class="item-desc">
                  (<span class="z-word"><span class="z-char">é‡</span><span class="z-yin"><span class="yin-symbol">ã„“</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¥</span></span></span><span class="z-word"><span class="z-char">å¤§</span><span class="z-yin"><span class="yin-symbol">ã„‰</span><span class="yin-symbol">ã„š</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å½±</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">éŸ¿</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¤</span><span class="tone tone-3">Ë‡</span></span></span>/<span class="z-word"><span class="z-char">éœ€</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„©</span></span></span><span class="z-word"><span class="z-char">ç«‹</span><span class="z-yin"><span class="yin-symbol">ã„Œ</span><span class="ã„§</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">å³</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="ã„§</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">è™•</span><span class="z-yin"><span class="yin-symbol">ã„”</span><span class="ã„¨</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">ç†</span><span class="z-yin"><span class="yin-symbol">ã„Œ</span><span class="ã„§</span><span class="tone tone-3">Ë‡</span></span></span>)
                </span>
              </span>
            </label>
          </div>
        </div>

        <!-- å½±éŸ¿å±¤é¢ (å„ªåŒ–æ©«å‘ä½ˆå±€) -->
        <div style="margin-top:16px;">
          <label>
            <span class="z-word"><span class="z-char">å½±</span><span class="z-yin"><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">éŸ¿</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¤</span><span class="tone tone-3">Ë‡</span></span></span><span class="z-word"><span class="z-char">å±¤</span><span class="z-yin"><span class="yin-symbol">ã„˜</span><span class="yin-symbol">ã„¥</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">é¢</span><span class="z-yin"><span class="yin-symbol">ã„‡</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¢</span><span class="tone tone-4">Ë‹</span></span></span>
          </label>
          <div class="checkbox-group">
            <label class="item-label scope-item scope-safety"><input type="checkbox" name="scope" value="å®‰å…¨å½±éŸ¿"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg><span class="z-word"><span class="z-char">å®‰</span><span class="z-yin"><span class="yin-symbol">ã„¢</span></span></span><span class="z-word"><span class="z-char">å…¨</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span></label>
            <label class="item-label scope-item scope-env"><input type="checkbox" name="scope" value="ç’°å¢ƒå½±éŸ¿"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 20a7 7 0 0 1-7-7c0-2.5 2-6 7-11 5 5 7 8.5 7 11a7 7 0 0 1-7 20z"/></svg><span class="z-word"><span class="z-char">ç’°</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„¨</span><span class="yin-symbol">ã„¢</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">å¢ƒ</span><span class="z-yin"><span class="yin-symbol">ã„</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„¥</span><span class="tone tone-4">Ë‹</span></span></span></label>
            <label class="item-label scope-item scope-health"><input type="checkbox" name="scope" value="å¥åº·å½±éŸ¿"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg><span class="z-word"><span class="z-char">å¥</span><span class="z-yin"><span class="ã„§</span><span class="ã„§</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">åº·</span><span class="z-yin"><span class="ã„</span><span class="ã„§</span><span class="ã„¤</span></span></span></label>
            <label class="item-label scope-item scope-inter"><input type="checkbox" name="scope" value="äººéš›å½±éŸ¿"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg><span class="z-word"><span class="z-char">äºº</span><span class="z-yin"><span class="yin-symbol">ã„–</span><span class="yin-symbol">ã„£</span><span class="tone tone-2">ËŠ</span></span></span><span class="z-word"><span class="z-char">éš›</span><span class="z-yin"><span class="ã„</span><span class="ã„§</span><span class="tone tone-4">Ë‹</span></span></span></label>
          </div>
        </div>
      </div>

      <div style="margin-top:30px; text-align:center;">
        <button id="btnGoPreview" type="button" class="btn large" disabled>
          <span class="z-word"><span class="z-char">ä¸‹</span><span class="z-yin"><span class="yin-symbol">ã„’</span><span class="yin-symbol">ã„§</span><span class="yin-symbol">ã„š</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">ä¸€</span><span class="z-yin"><span class="yin-symbol">ã„§</span></span></span><span class="z-word"><span class="z-char">æ­¥</span><span class="z-yin"><span class="yin-symbol">ã„…</span><span class="yin-symbol">ã„¨</span><span class="tone tone-4">Ë‹</span></span></span> â¡
        </button>
        <div id="errorMsg" style="color:#d32f2f; margin-top:10px; font-weight:bold;"></div>
      </div>
    </div>

    <!-- é é¢ 2 -->
    <div id="page-preview" class="page-section">
      <div class="row between" style="margin-bottom:15px;">
        <button id="btnBackEdit" type="button" class="btn back">â¬… ä¿®æ”¹å…§å®¹</button>
        <h3>å¿«å ±é è¦½</h3>
      </div>
      <div class="report-container">
        <div id="report">
          <div class="news-header">
            <img src="https://lh3.googleusercontent.com/d/1ybyLQCc_DIAUeS23tz-sORNL43Vv2Kan" style="position: absolute; left: 0; top: 0; bottom: 0; margin: auto; height: 60px;" alt="Logo" crossorigin="anonymous">
            <div style="text-align:center; margin-bottom:10px;">
              <h1><span class="z-word"><span class="z-char">æ°¸</span><span class="z-yin"><span class="yin-symbol">ã„©</span><span class="yin-symbol">ã„¥</span><span class="tone tone-3">Ë‡</span></span></span>...å¿«å ±</h1>
            </div>
          </div>
          <div class="news-title-box"><div id="rTitleContainer" style="display:flex; justify-content:center; align-items:center; flex-wrap:wrap;"></div></div>
          <div class="news-info">
            <div id="rMetaInfo"></div>
            <div>
              <span class="z-word"><span class="z-char">æ—¥</span><span class="z-yin"><span class="yin-symbol">ã„–</span><span class="tone tone-4">Ë‹</span></span></span><span class="z-word"><span class="z-char">æœŸ</span><span class="z-yin"><span class="yin-symbol">ã„‘</span><span class="ã„§</span><span class="tone tone-2">ËŠ</span></span></span>ï¼š<span id="rTime">---</span>
            </div>
          </div>
          <hr style="border:1px solid #000; margin:5px 0 20px 0;">
          <div class="news-content-wrapper">
            <div class="news-photo-box"><img id="rImg" src="" alt="æ–°èç…§ç‰‡"></div>
            <div id="newsContent" class="news-content-block"></div>
          </div>
          <div class="news-footer">ä¸­è¯é›»ä¿¡ï½œæ°¸çºŒç”Ÿæ´»å°è¨˜è€…è¡Œå‹•è¨ˆç•«ï½œ2026</div>
        </div>
      </div>
      <div class="text-center mt-4">
        <button id="btnDownload" type="button" class="btn">â¬‡ ä¸‹è¼‰åœ–ç‰‡ (PNG)</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const apiKey = ""; 

    function getZWord(char, yin, tone, isSmall = false) {
      let toneHtml = tone === "2" ? '<span class="tone tone-2">ËŠ</span>' : tone === "3" ? '<span class="tone tone-3">Ë‡</span>' : tone === "4" ? '<span class="tone tone-4">Ë‹</span>' : tone === "0" ? '<span class="tone tone-0">Ë™</span>' : "";
      let vy = yin ? yin.split('').filter(s => /[\u3100-\u312F]/.test(s)).map(s => `<span class="yin-symbol">${s}</span>`).join('') : "";
      let cls = isSmall ? "z-word z-small" : "z-word";
      return `<span class="${cls}"><span class="z-char">${char}</span><span class="z-yin">${vy}${toneHtml}</span></span>`;
    }

    const canvas = document.getElementById("canvas"), ctx = canvas.getContext("2d"), photoInput = document.getElementById("photoInput"), placeholderText = document.getElementById("placeholderText");
    const fileStatus = document.getElementById("fileStatus");
    let baseImage = null, circles = [], isDrawing = false, startX, startY;

    photoInput.onchange = e => {
      const file = e.target.files[0]; 
      if(!file) {
        fileStatus.innerHTML = [getZWord("æœª","ã„¨ã„Ÿ","4", true), getZWord("é¸","ã„’ã„©ã„¢","3", true), getZWord("æ“‡","ã„—ã„œ","2", true), getZWord("ç…§","ã„“ã„ ","4", true), getZWord("ç‰‡","ã„†ã„§ã„¢","4", true)].join('');
        return;
      }
      fileStatus.textContent = file.name;
      const img = new Image(); 
      img.onload = () => {
        const sc = Math.min(1200/img.width, 900/img.height); canvas.width = Math.floor(img.width*sc); canvas.height = Math.floor(img.height*sc);
        baseImage = img; circles = []; canvas.classList.remove('hidden'); placeholderText.classList.add('hidden'); redraw(); checkReady();
      }; 
      img.src = URL.createObjectURL(file);
    };

    function redraw() { if(!baseImage) return; ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height); ctx.lineWidth = 8; ctx.strokeStyle = "red"; circles.forEach(c => { ctx.beginPath(); ctx.ellipse(c.x, c.y, c.rx, c.ry, 0, 0, Math.PI * 2); ctx.stroke(); }); }
    function getPos(e) { const r = canvas.getBoundingClientRect(); const cx = e.clientX || (e.touches && e.touches[0].clientX), cy = e.clientY || (e.touches && e.touches[0].clientY); return { x: (cx-r.left)*(canvas.width/r.width), y: (cy-r.top)*(canvas.height/r.height) }; }

    canvas.onmousedown = e => { if(!baseImage) return; isDrawing = true; const p = getPos(e); startX = p.x; startY = p.y; };
    canvas.ontouchstart = e => { e.preventDefault(); if(!baseImage) return; isDrawing = true; const p = getPos(e); startX = p.x; startY = p.y; };
    window.onmousemove = e => { if(!isDrawing) return; const p = getPos(e); redraw(); ctx.beginPath(); ctx.ellipse((startX+p.x)/2, (startY+p.y)/2, Math.abs(p.x-startX)/2, Math.abs(p.y-startY)/2, 0, 0, Math.PI*2); ctx.stroke(); };
    window.ontouchmove = e => { if(!isDrawing) return; const p = getPos(e); redraw(); ctx.beginPath(); ctx.ellipse((startX+p.x)/2, (startY+p.y)/2, Math.abs(p.x-startX)/2, Math.abs(p.y-startY)/2, 0, 0, Math.PI*2); ctx.stroke(); };
    window.onmouseup = e => { if(!isDrawing) return; isDrawing = false; const p = getPos(e); if(Math.abs(p.x-startX)>5) circles.push({x:(startX+p.x)/2, y:(startY+p.y)/2, rx:Math.abs(p.x-startX)/2, ry:Math.abs(p.y-startY)/2}); redraw(); checkReady(); };
    window.ontouchend = e => { if(!isDrawing) return; isDrawing = false; redraw(); checkReady(); };

    function checkReady() { btnGoPreview.disabled = !baseImage; document.getElementById('btnUndo').disabled = circles.length === 0; document.getElementById('btnClear').disabled = circles.length === 0; }
    document.getElementById('btnUndo').onclick = () => { circles.pop(); redraw(); checkReady(); };
    document.getElementById('btnClear').onclick = () => { circles = []; redraw(); checkReady(); };

    async function callGeminiAI(imgBase64, p, i, s, sev, scope, reporter, loc) {
      const prompt = `è§’è‰²ï¼šä½ æ˜¯åœ‹å°çš„ã€Œæ°¸çºŒç”Ÿæ´»å°è¨˜è€…ã€æŒ‡å°è€å¸«ã€‚ä»»å‹™ï¼šæ’°å¯«ä¸€ç¯‡ç´„ 100-150 å­—çš„æ–°èå¿«å ±ã€‚è¦æ±‚ï¼š1.é–‹é ­ã€Œæœ¬å ±å°è¨˜è€…${reporter}ï¼Œç™¼ç¾...ã€ã€‚2.åœ°é»çµ•å°éµå®ˆä½¿ç”¨è€…è¼¸å…¥çš„ã€${loc}ã€ã€‚3.å»ºè­°å°è±¡æ˜¯ã€åŒå­¸ã€ã€‚4.ç¦å¿Œï¼šçµ•å°ä¸è¦å‡ºç¾ã€æŒ‡å°è€å¸«æé†’ã€ã€‚ä»¥ JSON æ ¼å¼å›å‚³ï¼ŒåŒ…å« title èˆ‡ content é™£åˆ—ã€‚`;
      const base64Data = imgBase64.split(',')[1];
      const fetchWithRetry = async (url, options, retries = 5, delay = 1000) => {
        for (let j = 0; j < retries; j++) {
          try { const res = await fetch(url, options); if (res.ok) return res; } catch (e) {}
          await new Promise(r => setTimeout(r, delay * Math.pow(2, j)));
        } return null;
      };
      const res = await fetchWithRetry(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }, { inlineData: { mimeType: "image/png", data: base64Data } }] }], generationConfig: { responseMimeType: "application/json" } })
      });
      if (!res) return null; const data = await res.json(); 
      try { 
        let rawText = data.candidates[0].content.parts[0].text;
        rawText = rawText.replace(/```json/g, '').replace(/```/g, '').trim();
        return JSON.parse(rawText); 
      } catch(e) { return null; }
    }

    btnGoPreview.onclick = async () => {
      const loadingHtml = [getZWord("æ­£","ã„“ã„¥","4"), getZWord("åœ¨","ã„—ã„","4"), getZWord("ç”Ÿ","ã„•ã„¥","1"), getZWord("æˆ","ã„”ã„¥","2"), getZWord("å¿«","ã„ã„¨ã„","4"), getZWord("å ±","ã„…ã„ ","4"), "..."].join('');
      btnGoPreview.disabled = true; btnGoPreview.innerHTML = loadingHtml;

      const reporterVal = document.getElementById('reporterName').value || "å°è¨˜è€…", teamVal = document.getElementById('team').value || "æœªé¸çµ„";
      const p = document.getElementById('problemInput').value || "å•é¡Œ", loc = document.getElementById('locationInput').value || "æ ¡åœ’";
      const impact = document.getElementById('impactInput').value || "é¢¨éšª", sugg = document.getElementById('suggestionInput').value || "æ”¹å–„å»ºè­°";
      
      const reporterLabel = getZWord("è¨˜","ã„ã„§","4") + getZWord("è€…","ã„“ã„œ","3");
      const reportLabel = getZWord("å ±","ã„…ã„ ","4") + getZWord("å°","ã„‰ã„ ","3");
      document.getElementById('rMetaInfo').innerHTML = `${reporterLabel}ï¼š<span class="input-highlight">${reporterVal}</span> / <span class="input-highlight">${teamVal}</span> ${reportLabel}`;
      
      const now = new Date(); document.getElementById('rTime').textContent = `${now.getFullYear()}/${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
      const img = canvas.toDataURL('image/png'); document.getElementById('rImg').src = img;

      const aiData = await callGeminiAI(img, p, impact, sugg, document.querySelector('input[name="severity"]:checked').value, Array.from(document.querySelectorAll('input[name="scope"]:checked')).map(cb => cb.value).join("ã€"), reporterVal, loc);
      
      if (aiData && Array.isArray(aiData.content) && Array.isArray(aiData.title)) {
        document.getElementById('newsContent').innerHTML = aiData.content.map(item => item.y ? getZWord(item.c, item.y, item.t) : item.c).join('');
        document.getElementById('rTitleContainer').innerHTML = aiData.title.map(item => item.y ? getZWord(item.c, item.y, item.t) : item.c).join('');
      } else {
        document.getElementById('rTitleContainer').innerHTML = `<span class="input-highlight">${loc}ç™¼ç¾${p}ï¼</span>`;
        document.getElementById('newsContent').innerHTML = `
          <p>æœ¬å ±å°è¨˜è€…å ±å°ï¼Œæ–¼<span class="input-highlight">${loc}</span>ç™¼ç¾<span class="input-highlight">${p}</span>å•é¡Œï¼Œé€™å¯èƒ½æœƒé€ æˆ<span class="input-highlight">${impact}</span>ã€‚</p>
          <p>å»ºè­°æ ¡åœ’æ‡‰æ¡å–<span class="input-highlight">${sugg}</span>ä¾†é€²è¡Œæ”¹å–„ã€‚ä¹Ÿåœ¨æ­¤å‘¼ç±²å„ä½åŒå­¸ï¼Œåœ¨å•é¡Œå°šæœªå®Œå…¨ä¿®å¾©å‰ï¼Œç¶“éæ™‚å‹™å¿…å¤šåŠ ç•™æ„ï¼Œå…±åŒç¶­è­·æ ¡åœ’çš„å®‰å…¨ç’°å¢ƒã€‚</p>
        `;
      }
      
      document.getElementById('page-edit').classList.remove('active'); document.getElementById('page-preview').classList.add('active');
      btnGoPreview.disabled = false;
      btnGoPreview.innerHTML = [getZWord("ä¸‹","ã„’ã„§ã„š","4"), getZWord("ä¸€","ã„§","1"), getZWord("æ­¥","ã„…ã„¨","4"), " â¡"].join('');
      window.scrollTo(0, 0);
    };

    btnBackEdit.onclick = () => { document.getElementById('page-preview').classList.remove('active'); document.getElementById('page-edit').classList.add('active'); window.scrollTo(0,0); };
    btnDownload.onclick = async () => { const reportDiv = document.getElementById('report'); const c = await html2canvas(reportDiv, { scale: 2, useCORS: true }); const a = document.createElement("a"); a.href = c.toDataURL(); a.download = `å®‰å…¨å¿«å ±_${Date.now()}.png`; a.click(); };

    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      function setupMic(btnId, inputId) {
        const btn = document.getElementById(btnId), input = document.getElementById(inputId);
        let rec = new SpeechRecognition(); rec.lang = 'zh-TW';
        btn.onclick = () => { if(btn.classList.contains('recording')){ rec.stop(); } else { rec.start(); } };
        rec.onstart = () => btn.classList.add('recording'); rec.onend = () => btn.classList.remove('recording');
        rec.onresult = (e) => { input.value = e.results[0][0].transcript.replace(/[ã€‚ï¼Œï¼]$/, ""); };
      }
      setupMic("btnMicLocation", "locationInput"); setupMic("btnMicProblem", "problemInput"); setupMic("btnMicImpact", "impactInput"); setupMic("btnMicSuggestion", "suggestionInput");
    }
  </script>
</body>
</html>
